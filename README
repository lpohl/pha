
	pha - Perl High Availabillity

Software to keep a Scriptable Service alive on one of two Nodes.

In this Development example it is an Virtual IP and the http Service scripted trough the Shell-Scripts in ./res/.

Floders & Files: 
./README

# pha configuration file
./etc/config

# programms
./bin/pha-cli.pl
./bin/pha-supervise.pl
./bin/pha-receiver.pl
./bin/pha-sender.pl

# Libary with common functions, used by pha-*.pl
./lib/pha.pm

# pids and logs
./var/run/
./var/log.*

# ressource scripts, look into test for an example what they must provide! (start, stop, check)
./res/
./res/service
./res/ipaddr
./res/test



# 
# set a nice Shell Prompt Status indicator:
#

getPromptStatus()
{
        ls /opt/pha/var/run/{receiver,sender,supervise} >/dev/null 2>&1
        if [ $? != 0 ]; then
                status='NOTRUNNING'
        else
                if [ "$(/opt/pha/bin/getst.pl 2>/dev/null)" == "ONLINE" ]; then
                        status='Active'
                else
                        status='Standby'
                fi
        fi
        echo $status
}
# the PS1 is to set somewhere in bashrc  or profile, some examples:

# debian 
# PS1="${debian_chroot:+($debian_chroot)}\u@\h:[\$(getPromptStatus)] \w\$ "

# RHEL 5 like
# PS1="[\u@\h:\$(getPromptStatus)] \W \\$ "



